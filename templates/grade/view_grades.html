{% extends "base.html" %}
{% load grade_filters %}
{% block content %}
    <div class="module-header">
        <h2>إدارة العلامات - {{ classroom.name }} / {{ subject_display_name }}</h2>
        <div class="float-right">
            <a href="{% url 'grade:edit_grades' classroom.id subject.id %}" class="btn btn-primary">
                تعديل العلامات
            </a>
            <a href="{% url 'grade:export_grades_excel' classroom.id subject.id %}" class="btn btn-success">
                تصدير لإكسل
            </a>
            {% comment %} <a href="{% url 'grade:custom_print_grades' classroom.id subject.id %}" class="btn btn-info" target="_blank">
                طباعة مخصصة
            </a> {% endcomment %}
            <a href="{% url 'grade:select_subject' classroom.id %}" class="btn btn-secondary">
                العودة للمواد
            </a>
            <a href="{% url 'grade:dashboard' %}" class="btn btn-secondary">
                العودة للقائمة
            </a>
        </div>
    </div>
    <div class="table-responsive">
        <table class="table table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>اسم الطالب</th>
                    <th>1</th>
                    <th>2</th>
                    <th>3</th>
                    <th>نصفي</th>
                    <th>المجموع</th>
                    <th>ملاحظات</th>
                </tr>
            </thead>
            <tbody>
                {% for data in students_data %}
                <tr>
                    <td>{{ data.student.full_name }}</td>
                    <td>{{ data.activity.grade|default_if_none:'' }}</td>
                    <td>{{ data.monthly.grade|default_if_none:'' }}</td>
                    <td>{{ data.midterm.grade|default_if_none:'' }}</td>
                    <td>{{ data.final.grade|default_if_none:'' }}</td>
                    <td><strong>{{ data.total }}</strong></td>
                    <td>{{ data.activity.notes|default:'' }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}